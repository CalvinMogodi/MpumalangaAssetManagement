<p-toast [style]="{marginTop: '90px'}" position="top-right"></p-toast>
<div class="header">
    <header>SUMMARY OF ACCOMMODATION REQUIREMENTS PER BUDGET PROGRAMME
    </header>
</div>

<div class="p-fluid p-grid p-formgrid">
    <form style="width: inherit;">
        <div class="card mt-5">
            <div class="formgrid grid">
                <div class="field col">
                    <span class="p-float-label p-input-icon-left">
                        <textarea [ngModelOptions]="{standalone: true}" (blur)="updateUamp()"
                            [(ngModel)]="uamp.templeteOne.optimalSupportingAccommodation.mission" autocomplete="off"
                            type="text" pInputText class="ui-inputtext ui-widget"></textarea>
                        <label for="float-input">Mission</label>
                        <small *ngIf="submitted && o.mission.errors && o.mission.errors.required" class="p-error">This
                            field is required.</small>
                    </span>
                </div>
                <div class="field col">
                    <span class="p-float-label p-input-icon-left">                        
                        <textarea [ngModelOptions]="{standalone: true}" (blur)="updateUamp()"
                            [(ngModel)]="uamp.templeteOne.optimalSupportingAccommodation.supportingAccommodation"
                            autocomplete="off" type="text" pInputText class="ui-inputtext ui-widget"></textarea>
                            <label for="float-input">Optimal supporting accommodation</label>
                        <small
                            *ngIf="submitted && o.optimalSupportingAccommodation.errors && o.optimalSupportingAccommodation.errors.required"
                            class="p-error">This field is required.</small>
                        <span style="font-size: xx-small;">(What are the optimal assets required to support this
                            mission)</span>
                    </span>
                </div>
            </div>
        </div>
    </form>
    <p-fieldset legend="Programme" [toggleable]="true">
        <form [formGroup]="programmeForm">
            <div class="formgrid grid">
                <div class="field col-6">                    
                    <textarea formControlName="corporateObjective" autocomplete="off" type="text" pInputTextarea
                        class="ui-inputtext ui-widget"></textarea>
                    <label for="corporateObjective">Corporate Objectives</label>
                    <div *ngIf="submitted && p.corporateObjective.errors" class="text-error"><br>
                        <div *ngIf="p.corporateObjective.errors.required">This field is required.</div>
                    </div>
                </div>
                <div class="field col-6">                   
                    <textarea formControlName="outcomes" type="text" pInputText
                        class="ui-inputtext ui-widget"></textarea>
                        <label for="outcomes">Outcomes/ Planned Outputs</label>
                    <div *ngIf="submitted && p.outcomes.errors" class="text-error"><br>
                        <div *ngIf="p.outcomes.errors.required">This field is required.</div>
                    </div>
                </div>
            <div class="field col-6"> 
                    <label for="optimalSupportingAccommodationSolution">Optimal Supporting Accommodation
                        Solution</label>
                    <textarea formControlName="optimalSupportingAccommodationSolution" autocomplete="off" type="text"
                        pInputText class="ui-inputtext ui-widget"></textarea>
                    <div *ngIf="submitted && p.optimalSupportingAccommodationSolution.errors" class="text-error"><br>
                        <div *ngIf="p.optimalSupportingAccommodationSolution.errors.required">This field is required.
                        </div>
                    </div>
                    <span style="font-size: xx-small;">(Give a brief summary of the accommodation requirements, current
                        usage and solutions for Head Office& Regions / Districts)</span>
                </div>
                <div class="field col-6 md-6"> 
                    <label for="rationaleChosenSolution">Rationale for Chosen Solution</label>
                    <textarea formControlName="rationaleChosenSolution" autocomplete="off" type="text" pInputText
                        class="ui-inputtext ui-widget"></textarea>
                    <div *ngIf="submitted && p.rationaleChosenSolution.errors" class="text-error"><br>
                        <div *ngIf="p.rationaleChosenSolution.errors.required">This field is required.</div>
                    </div>
                    <span style="font-size: xx-small;">Provide a brief motivation for your solutions</span>
                </div>
                <div class="field col-12 md-12"> 
                <button *ngIf="!isEdit" pButton title="Add Programme" label="Add Programme" type="button"
                    (click)="addProgram()" icon="pi pi-plus" style="float: right;width: auto;"></button>
                <button *ngIf="isEdit" pButton title="Update Programme" label="Update Programme" type="button"
                    (click)="onUpdate()" icon="pi pi-pencil" style="float: right;width: auto;"></button>
            </div>
        </div>
        </form>
    </p-fieldset>

    <div class="mt-5">
        <p-table [value]="programmes" styleClass="p-datatable-striped" [responsive]="true">
            <ng-template pTemplate="header">
                <tr>
                    <th>Corporate Objectives</th>
                    <th>Outcomes/ Planned Outputs</th>
                    <th>Optimal Supporting Accommodation Solution</th>
                    <th>Rationale for Chosen Solution</th>
                    <th style="width: 200px;"></th>
                </tr>
            </ng-template>
            <ng-template pTemplate="body" let-programme>
                <tr>
                    <td>{{programme.corporateObjective}}</td>
                    <td>{{programme.outcomes}}</td>
                    <td>{{programme.optimalSupportingAccommodationSolution}}</td>
                    <td>{{programme.rationaleChosenSolution}}</td>
                    <td style="text-align: center;" *ngIf="programmes.length > 0">
                        <p-splitButton label="More" *ngIf="mode != 'View'" [model]="buttonItems"
                            (onDropdownClick)="selectProgramme(programme)" styleClass="p-button-secondary">
                        </p-splitButton>
                    </td>
                </tr>
            </ng-template>
        </p-table>
    </div>
</div>

<div *ngIf="showComfirmationDelete" class="dialogBackgroud"></div>
<p-dialog header="Confirmation" [(visible)]="showComfirmationDelete" [breakpoints]="{'960px': '75vw'}"
    [style]="{width: '25vw'}" [baseZIndex]="10000" [draggable]="false" [resizable]="false">
    <p>Are you sure that you want to delete this programme?</p>
    <p-footer>
        <button style="float: left;" (click)="showComfirmationDelete=false" pButton type="button" label="No"
            class="ui-button-info"></button>
        <button style="float: right;" (click)="showComfirmationDelete=false;deleteProgramme()" pButton type="button"
            label="Yes" class="ui-button-info"></button>
    </p-footer>
</p-dialog>