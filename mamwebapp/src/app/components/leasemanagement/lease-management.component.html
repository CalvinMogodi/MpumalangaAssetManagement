<p-toast [style]="{marginTop: '80px'}" position="top-right"></p-toast>
<p-breadcrumb [model]="items"></p-breadcrumb>
<br /><br />

<div class="text-center" style="color: red;" *ngIf="error">
    <h5 class="mt-20">
        <li class="pi pi-exclamation-triangle" style="color: red;font-size: xx-large;"></li><span> An error has
            occured...</span>
    </h5>
    <h6 class="color-aqua">{{errorMsg}}</h6>
</div>

<div class="row">
    <p-table id="lpComponentID" #lp [value]="leasedProperties" [paginator]="true" [rows]="10" [showCurrentPageReport]="true"
        responsiveLayout="scroll" [rowsPerPageOptions]="[5,10,15]" dataKey="leaseStatusesId" selectionMode="single"
        rowExpandMode="single"
        [globalFilterFields]="['fileReference','type','propertyCode','facilityName','natureofLease','startingDate','terminationDate']">
        <ng-template pTemplate="caption">
            <div style="text-align: right">
                <i class="pi pi-search" style="margin:4px 4px 0 0"></i>
                <input type="text" pInputText size="50" placeholder="Global Filter" class="ui-inputtext ui-widget"
                    (input)="lp.filterGlobal($event.target.value, 'contains')" style="width:auto">
            </div>
        </ng-template>
        <ng-template pTemplate="header">
            <tr>
                <th *ngFor="let col of cols" [pSortableColumn]="col.field" [style.width]="col.field == 'status' ? '100px' : 'unset'">
                    {{col.header}}<p-sortIcon [field]="col.field" ariaLabel="Activate to sort"
                    ariaLabelDesc="Activate to sort in descending order"
                    ariaLabelAsc="Activate to sort in ascending order"></p-sortIcon>
                </th>
                <th>Actions</th>
            </tr>
        </ng-template>
        <ng-template pTemplate="body" let-rowData let-editing="editing" let-ri="rowIndex">
            <tr [pEditableRow]="rowData">
                <td *ngFor="let col of cols">
                    <i *ngIf="col.field == 'status'" class="pi pi-circle-on" style="font-size: 2rem"
                        [style.color]="rowData[col.field]"></i>
                    <label *ngIf="col.field != 'status'">{{rowData[col.field]}}</label>
                </td>
                <td style="text-align:center">
                    <p-splitButton label="More" [model]="buttonItems" (onDropdownClick)="selectProperty(rowData, ri)"
                        styleClass="p-button-secondary"></p-splitButton>
                </td>
            </tr>
        </ng-template>      
    </p-table>
    <div class="p-d-flex" style="text-align: end;">
        <p-splitButton label="Export" [model]="printItems" icon="pi pi-save">
        </p-splitButton>
    </div>
</div>

<div *ngIf="showLMDDialog" class="dialogBackgroud"></div>
<p-dialog [(visible)]="showLMDDialog" *ngIf="showLMDDialog" [style]="{width: '90vw'}" [baseZIndex]="10000">
    <p-header> Leased Property Details - {{selectedLeasedProperty.facilityName}} </p-header>
    <app-leased-property (newAsset)='addUpdateAsset($event)' [selectedLeasedProperty]="selectedLeasedProperty">
    </app-leased-property>
</p-dialog>

<div *ngIf="showComfirmaDelete" class="dialogBackgroud"></div>
<p-dialog header="Confirmation" [(visible)]="showComfirmaDelete" [breakpoints]="{'960px': '75vw'}"
    [style]="{width: '25vw'}" [baseZIndex]="10000" [draggable]="false" [resizable]="false">
    <p>Are you sure that you want to delete this property?</p>
    <p-footer>
        <button style="float: left;" (click)="showComfirmaDelete=false" pButton type="button" label="No"
            class="ui-button-info"></button>
        <button style="float: right;" (click)="showComfirmaDelete=false;deleteLeasedProperty()" pButton type="button" label="Yes"
            class="ui-button-info"></button>
    </p-footer>
</p-dialog>


