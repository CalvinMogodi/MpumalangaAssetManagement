<p-toast [style]="{marginTop: '80px'}" position="top-right"></p-toast>
<p-breadcrumb [model]="items"></p-breadcrumb>
<br /><br />

<div class="text-center" style="color: red;" *ngIf="error">
    <h5 class="mt-20">
        <li class="pi pi-exclamation-triangle" style="color: red;font-size: xx-large;"></li><span> An error has
            occured...</span>
    </h5>
    <h6 class="color-aqua">{{errorMsg}}</h6>
</div>

<div class="row">
    <p-table id="lpComponentID" #lp [value]="leasedProperties" [paginator]="true" [rows]="10" [showCurrentPageReport]="true"
        responsiveLayout="scroll" [rowsPerPageOptions]="[5,10,15]" dataKey="leaseStatusesId" selectionMode="single"
        rowExpandMode="single"
        [globalFilterFields]="['fileReference','type','propertyCode','facilityName','natureofLease','startingDate','terminationDate']">
        <ng-template pTemplate="caption">
            <div style="text-align: right">
                <i class="pi pi-search" style="margin:4px 4px 0 0"></i>
                <input type="text" pInputText size="50" placeholder="Global Filter" class="ui-inputtext ui-widget"
                    (input)="lp.filterGlobal($event.target.value, 'contains')" style="width:auto">
            </div>
        </ng-template>
        <ng-template pTemplate="header">
            <tr>
                <th pSortableColumn="fileReference">File Reference <p-sortIcon field="fileReference"></p-sortIcon>
                </th>
                <th style="width: 110px;" pSortableColumn="type">District <p-sortIcon field="district"></p-sortIcon>
                </th>
                <th style="width: 110px;" pSortableColumn="type">Type <p-sortIcon field="type"></p-sortIcon>
                </th>
                <th pSortableColumn="propertyCode">Property Code <p-sortIcon field="propertyCode"></p-sortIcon>
                </th>
                <th pSortableColumn="facilityName">Facility Name <p-sortIcon field="facilityName"></p-sortIcon>
                </th>
                <th pSortableColumn="natureofLease">Nature of Lease <p-sortIcon field="natureofLease"></p-sortIcon>
                </th>
                <th pSortableColumn="startingDate">Starting Date <p-sortIcon field="startingDate"></p-sortIcon>
                </th>
                <th pSortableColumn="terminationDate">Termination Date <p-sortIcon field="terminationDate"></p-sortIcon>
                </th>
                <th>Actions</th>
            </tr>
        </ng-template>
        <ng-template pTemplate="body" let-property>
            <tr>
                <td>{{property.fileReference}}</td>
                <td>{{property.district}}</td>
                <td>{{property.type}}</td>
                <td>{{property.propertyCode}}</td>
                <td>{{property.facilityName}}</td>
                <td>{{property.natureofLease}}</td>
                <td>{{property.startingDate | date}}</td>
                <td>{{property.terminationDate | date}}</td>
                <td>
                    <div style="text-align: center;">
                        <p-splitButton label="More" [model]="buttonItems"
                            (onDropdownClick)="selectLeasedProperty(property)" styleClass="p-button-secondary">
                        </p-splitButton>
                    </div>
                </td>
            </tr>
        </ng-template>       
    </p-table>
    <div class="p-d-flex" style="text-align: end;">
        <p-splitButton label="Export" [model]="printItems" icon="pi pi-save">
        </p-splitButton>
    </div>
</div>

<div *ngIf="showLMDDialog" class="dialogBackgroud"></div>
<p-dialog [(visible)]="showLMDDialog" *ngIf="showLMDDialog" [style]="{width: '90vw'}" [baseZIndex]="10000">
    <p-header> Leased Property Details - {{selectedLeasedProperty.facilityName}} </p-header>
    <app-leased-property (newAsset)='addUpdateAsset($event)' [selectedLeasedProperty]="selectedLeasedProperty">
    </app-leased-property>
</p-dialog>

<div *ngIf="showComfirmaDelete" class="dialogBackgroud"></div>
<p-dialog header="Confirmation" [(visible)]="showComfirmaDelete" [breakpoints]="{'960px': '75vw'}"
    [style]="{width: '25vw'}" [baseZIndex]="10000" [draggable]="false" [resizable]="false">
    <p>Are you sure that you want to delete this property?</p>
    <p-footer>
        <button style="float: left;" (click)="showComfirmaDelete=false" pButton type="button" label="No"
            class="ui-button-info"></button>
        <button style="float: right;" (click)="showComfirmaDelete=false;deleteLeasedProperty()" pButton type="button" label="Yes"
            class="ui-button-info"></button>
    </p-footer>
</p-dialog>


